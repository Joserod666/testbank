{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/freelance-project-manager/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from \"@supabase/ssr\"\nimport { cookies } from \"next/headers\"\n\nexport async function createClient() {\n\tconst cookieStore = await cookies()\n\n\treturn createServerClient(process.env.NEXT_PUBLIC_SUPABASE_URL!, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!, {\n\t\tcookies: {\n\t\t\tgetAll() {\n\t\t\t\treturn cookieStore.getAll()\n\t\t\t},\n\t\t\tsetAll(cookiesToSet) {\n\t\t\t\ttry {\n\t\t\t\t\tcookiesToSet.forEach(({ name, value, options }) => cookieStore.set(name, value, options))\n\t\t\t\t} catch {\n\t\t\t\t\t// The \"setAll\" method was called from a Server Component.\n\t\t\t\t\t// This can be ignored if you have proxy refreshing\n\t\t\t\t\t// user sessions.\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tauth: {\n\t\t\t// Habilitar soporte para MPC (Multi-Party Computation)\n\t\t\tflowType: \"pkce\",\n\t\t\tautoRefreshToken: true,\n\t\t\tdetectSessionInUrl: true,\n\t\t\tpersistSession: true,\n\t\t},\n\t})\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAEO,eAAe;IACrB,MAAM,cAAc,MAAM,IAAA,0IAAO;IAEjC,OAAO,IAAA,+LAAkB,oKAAoF;QAC5G,SAAS;YACR;gBACC,OAAO,YAAY,MAAM;YAC1B;YACA,QAAO,YAAY;gBAClB,IAAI;oBACH,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAK,YAAY,GAAG,CAAC,MAAM,OAAO;gBACjF,EAAE,OAAM;gBACP,0DAA0D;gBAC1D,mDAAmD;gBACnD,iBAAiB;gBAClB;YACD;QACD;QACA,MAAM;YACL,uDAAuD;YACvD,UAAU;YACV,kBAAkB;YAClB,oBAAoB;YACpB,gBAAgB;QACjB;IACD;AACD"}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///D:/freelance-project-manager/lib/utils/date-helpers.ts"],"sourcesContent":["export function formatDate(date: string | Date): string {\n\tconst d = new Date(date)\n\treturn d.toLocaleDateString(\"es-ES\", {\n\t\tyear: \"numeric\",\n\t\tmonth: \"short\",\n\t\tday: \"numeric\",\n\t})\n}\n\nexport function formatDateTime(date: string | Date): string {\n\tconst d = new Date(date)\n\treturn d.toLocaleDateString(\"es-ES\", {\n\t\tyear: \"numeric\",\n\t\tmonth: \"short\",\n\t\tday: \"numeric\",\n\t\thour: \"2-digit\",\n\t\tminute: \"2-digit\",\n\t})\n}\n\nexport function getDaysUntil(date: string | Date): number {\n\tconst today = new Date()\n\ttoday.setHours(0, 0, 0, 0)\n\tconst target = new Date(date)\n\ttarget.setHours(0, 0, 0, 0)\n\tconst diff = target.getTime() - today.getTime()\n\treturn Math.ceil(diff / (1000 * 60 * 60 * 24))\n}\n\nexport function getHoursUntil(date: string | Date): number {\n\tconst now = new Date()\n\tconst target = new Date(date)\n\tconst diff = target.getTime() - now.getTime()\n\treturn Math.ceil(diff / (1000 * 60 * 60))\n}\n\nexport function getTimeUntilFormatted(date: string | Date): string {\n\tconst hoursUntil = getHoursUntil(date)\n\tconst daysUntil = getDaysUntil(date)\n\n\tif (hoursUntil < 0) {\n\t\tconst absHours = Math.abs(hoursUntil)\n\t\tconst absDays = Math.floor(absHours / 24)\n\t\treturn `${absDays} d√≠a${absDays !== 1 ? \"s\" : \"\"} y ${absHours % 24} hora${absHours % 24 !== 1 ? \"s\" : \"\"} atrasado`\n\t}\n\n\tif (hoursUntil < 24) {\n\t\treturn `${hoursUntil} hora${hoursUntil !== 1 ? \"s\" : \"\"}`\n\t}\n\n\tconst days = Math.floor(hoursUntil / 24)\n\tconst hours = hoursUntil % 24\n\n\tif (hours === 0) {\n\t\treturn `${days} d√≠a${days !== 1 ? \"s\" : \"\"}`\n\t}\n\n\treturn `${days} d√≠a${days !== 1 ? \"s\" : \"\"} y ${hours} hora${hours !== 1 ? \"s\" : \"\"}`\n}\n\nexport function isWithin7Days(date: string | Date): boolean {\n\tconst hoursUntil = getHoursUntil(date)\n\treturn hoursUntil >= 0 && hoursUntil <= 7 * 24\n}\n\nexport function isOverdue(date: string | Date): boolean {\n  return getDaysUntil(date) < 0\n}\n\nexport function isUpcoming(date: string | Date, days = 7): boolean {\n  const daysUntil = getDaysUntil(date)\n  return daysUntil >= 0 && daysUntil <= days\n}\n\nexport function getDateStatus(date: string | Date): \"overdue\" | \"urgent\" | \"upcoming\" | \"normal\" {\n  const daysUntil = getDaysUntil(date)\n  if (daysUntil < 0) return \"overdue\"\n  if (daysUntil <= 3) return \"urgent\"\n  if (daysUntil <= 7) return \"upcoming\"\n  return \"normal\"\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAO,SAAS,WAAW,IAAmB;IAC7C,MAAM,IAAI,IAAI,KAAK;IACnB,OAAO,EAAE,kBAAkB,CAAC,SAAS;QACpC,MAAM;QACN,OAAO;QACP,KAAK;IACN;AACD;AAEO,SAAS,eAAe,IAAmB;IACjD,MAAM,IAAI,IAAI,KAAK;IACnB,OAAO,EAAE,kBAAkB,CAAC,SAAS;QACpC,MAAM;QACN,OAAO;QACP,KAAK;QACL,MAAM;QACN,QAAQ;IACT;AACD;AAEO,SAAS,aAAa,IAAmB;IAC/C,MAAM,QAAQ,IAAI;IAClB,MAAM,QAAQ,CAAC,GAAG,GAAG,GAAG;IACxB,MAAM,SAAS,IAAI,KAAK;IACxB,OAAO,QAAQ,CAAC,GAAG,GAAG,GAAG;IACzB,MAAM,OAAO,OAAO,OAAO,KAAK,MAAM,OAAO;IAC7C,OAAO,KAAK,IAAI,CAAC,OAAO,CAAC,OAAO,KAAK,KAAK,EAAE;AAC7C;AAEO,SAAS,cAAc,IAAmB;IAChD,MAAM,MAAM,IAAI;IAChB,MAAM,SAAS,IAAI,KAAK;IACxB,MAAM,OAAO,OAAO,OAAO,KAAK,IAAI,OAAO;IAC3C,OAAO,KAAK,IAAI,CAAC,OAAO,CAAC,OAAO,KAAK,EAAE;AACxC;AAEO,SAAS,sBAAsB,IAAmB;IACxD,MAAM,aAAa,cAAc;IACjC,MAAM,YAAY,aAAa;IAE/B,IAAI,aAAa,GAAG;QACnB,MAAM,WAAW,KAAK,GAAG,CAAC;QAC1B,MAAM,UAAU,KAAK,KAAK,CAAC,WAAW;QACtC,OAAO,GAAG,QAAQ,IAAI,EAAE,YAAY,IAAI,MAAM,GAAG,GAAG,EAAE,WAAW,GAAG,KAAK,EAAE,WAAW,OAAO,IAAI,MAAM,GAAG,SAAS,CAAC;IACrH;IAEA,IAAI,aAAa,IAAI;QACpB,OAAO,GAAG,WAAW,KAAK,EAAE,eAAe,IAAI,MAAM,IAAI;IAC1D;IAEA,MAAM,OAAO,KAAK,KAAK,CAAC,aAAa;IACrC,MAAM,QAAQ,aAAa;IAE3B,IAAI,UAAU,GAAG;QAChB,OAAO,GAAG,KAAK,IAAI,EAAE,SAAS,IAAI,MAAM,IAAI;IAC7C;IAEA,OAAO,GAAG,KAAK,IAAI,EAAE,SAAS,IAAI,MAAM,GAAG,GAAG,EAAE,MAAM,KAAK,EAAE,UAAU,IAAI,MAAM,IAAI;AACtF;AAEO,SAAS,cAAc,IAAmB;IAChD,MAAM,aAAa,cAAc;IACjC,OAAO,cAAc,KAAK,cAAc,IAAI;AAC7C;AAEO,SAAS,UAAU,IAAmB;IAC3C,OAAO,aAAa,QAAQ;AAC9B;AAEO,SAAS,WAAW,IAAmB,EAAE,OAAO,CAAC;IACtD,MAAM,YAAY,aAAa;IAC/B,OAAO,aAAa,KAAK,aAAa;AACxC;AAEO,SAAS,cAAc,IAAmB;IAC/C,MAAM,YAAY,aAAa;IAC/B,IAAI,YAAY,GAAG,OAAO;IAC1B,IAAI,aAAa,GAAG,OAAO;IAC3B,IAAI,aAAa,GAAG,OAAO;IAC3B,OAAO;AACT"}},
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file:///D:/freelance-project-manager/lib/services/alert-service.ts"],"sourcesContent":["import { createClient } from \"@/lib/supabase/server\"\r\nimport type { Project } from \"@/lib/types\"\r\nimport { getHoursUntil, formatDate, getTimeUntilFormatted } from \"@/lib/utils/date-helpers\"\r\n\r\ninterface AlertProject extends Project {\r\n\tclients: {\r\n\t\tname: string\r\n\t\temail: string | null\r\n\t}\r\n}\r\n\r\n/**\r\n * Verifica proyectos que vencen en 3 d√≠as o menos\r\n */\r\nexport async function checkUpcomingDeadlines() {\r\n\tconst supabase = await createClient()\r\n\r\n\tconst { data: projects } = await supabase\r\n\t\t.from(\"projects\")\r\n\t\t.select(\"*, clients(name, email)\")\r\n\t\t.in(\"status\", [\"pending\", \"in_progress\", \"delayed\"])\r\n\t\t.order(\"due_date\", { ascending: true })\r\n\r\n\tif (!projects || projects.length === 0) {\r\n\t\treturn []\r\n\t}\r\n\r\n\tconst urgentProjects: AlertProject[] = []\r\n\r\n\tprojects.forEach((project: AlertProject) => {\r\n\t\tconst hoursUntil = getHoursUntil(project.due_date)\r\n\t\t// Proyectos que vencen en 3 d√≠as (72 horas) o menos\r\n\t\tif (hoursUntil >= 0 && hoursUntil <= 72) {\r\n\t\t\turgentProjects.push(project)\r\n\t\t}\r\n\t})\r\n\r\n\treturn urgentProjects\r\n}\r\n\r\n/**\r\n * Env√≠a alerta por consola (simulado)\r\n */\r\nexport function sendConsoleAlert(project: AlertProject) {\r\n\tconst hoursUntil = getHoursUntil(project.due_date)\r\n\tconst timeUntil = getTimeUntilFormatted(project.due_date)\r\n\r\n\tconsole.log(\"=\".repeat(80))\r\n\tconsole.log(\"üö® ALERTA: Proyecto pr√≥ximo a vencer\")\r\n\tconsole.log(\"=\".repeat(80))\r\n\tconsole.log(`Proyecto: ${project.name}`)\r\n\tconsole.log(`Cliente: ${project.clients.name}`)\r\n\tconsole.log(`Fecha de vencimiento: ${formatDate(project.due_date)}`)\r\n\tconsole.log(`Tiempo restante: ${timeUntil}`)\r\n\tconsole.log(`Horas restantes: ${hoursUntil} horas`)\r\n\tconsole.log(`Estado: ${project.status}`)\r\n\tconsole.log(`Progreso: ${project.completion_percentage}%`)\r\n\tconsole.log(\"=\".repeat(80))\r\n}\r\n\r\n/**\r\n * Env√≠a alerta por email usando Resend (real)\r\n */\r\nexport async function sendEmailAlert(project: AlertProject) {\r\n\tconst hoursUntil = getHoursUntil(project.due_date)\r\n\tconst timeUntil = getTimeUntilFormatted(project.due_date)\r\n\r\n\t// Verificar que Resend est√© configurado\r\n\tconst resendApiKey = process.env.RESEND_API_KEY\r\n\tconst fromEmail = process.env.RESEND_FROM_EMAIL || \"noreply@example.com\"\r\n\r\n\tif (!resendApiKey) {\r\n\t\tconsole.warn(\"‚ö†Ô∏è RESEND_API_KEY no configurada. Saltando env√≠o de email real.\")\r\n\t\treturn { success: false, error: \"RESEND_API_KEY no configurada\" }\r\n\t}\r\n\r\n\ttry {\r\n\t\t// Importar Resend din√°micamente\r\n\t\tconst resendModule = await import(\"resend\")\r\n\t\tconst Resend = resendModule.Resend || (resendModule as any).default?.Resend || (resendModule as any).default\r\n\t\t\r\n\t\tif (!Resend) {\r\n\t\t\tthrow new Error(\"No se pudo importar Resend correctamente\")\r\n\t\t}\r\n\t\t\r\n\t\tconst resend = new Resend(resendApiKey)\r\n\r\n\t\tconst emailContent = `\r\n\t\t\t<h2>üö® Alerta: Proyecto pr√≥ximo a vencer</h2>\r\n\t\t\t<p>El siguiente proyecto est√° pr√≥ximo a vencer:</p>\r\n\t\t\t<ul>\r\n\t\t\t\t<li><strong>Proyecto:</strong> ${project.name}</li>\r\n\t\t\t\t<li><strong>Cliente:</strong> ${project.clients.name}</li>\r\n\t\t\t\t<li><strong>Fecha de vencimiento:</strong> ${formatDate(project.due_date)}</li>\r\n\t\t\t\t<li><strong>Tiempo restante:</strong> ${timeUntil}</li>\r\n\t\t\t\t<li><strong>Horas restantes:</strong> ${hoursUntil} horas</li>\r\n\t\t\t\t<li><strong>Estado:</strong> ${project.status}</li>\r\n\t\t\t\t<li><strong>Progreso:</strong> ${project.completion_percentage}%</li>\r\n\t\t\t</ul>\r\n\t\t\t<p>Por favor, revisa el proyecto y toma las acciones necesarias.</p>\r\n\t\t`\r\n\r\n\t\t// Obtener email del cliente o usar email por defecto\r\n\t\tconst toEmail = project.clients.email || process.env.ALERT_DEFAULT_EMAIL || \"admin@example.com\"\r\n\r\n\t\tconst { data, error } = await resend.emails.send({\r\n\t\t\tfrom: fromEmail,\r\n\t\t\tto: [toEmail],\r\n\t\t\tsubject: `üö® Alerta: ${project.name} vence en ${timeUntil}`,\r\n\t\t\thtml: emailContent,\r\n\t\t})\r\n\r\n\t\tif (error) {\r\n\t\t\tconsole.error(\"‚ùå Error al enviar email:\", error)\r\n\t\t\treturn { success: false, error }\r\n\t\t}\r\n\r\n\t\tconsole.log(\"‚úÖ Email enviado exitosamente:\", data)\r\n\t\treturn { success: true, data }\r\n\t} catch (error) {\r\n\t\tconsole.error(\"‚ùå Error al inicializar Resend:\", error)\r\n\t\treturn { success: false, error }\r\n\t}\r\n}\r\n\r\n/**\r\n * Procesa todas las alertas (consola + email)\r\n */\r\nexport async function processAlerts() {\r\n\tconsole.log(\"\\nüîç Verificando proyectos pr√≥ximos a vencer...\")\r\n\tconst urgentProjects = await checkUpcomingDeadlines()\r\n\r\n\tif (urgentProjects.length === 0) {\r\n\t\tconsole.log(\"‚úÖ No hay proyectos pr√≥ximos a vencer (3 d√≠as o menos)\")\r\n\t\treturn { count: 0, alerts: [] }\r\n\t}\r\n\r\n\tconsole.log(`‚ö†Ô∏è Se encontraron ${urgentProjects.length} proyecto(s) pr√≥ximo(s) a vencer\\n`)\r\n\r\n\tconst alerts = []\r\n\r\n\tfor (const project of urgentProjects) {\r\n\t\t// Enviar alerta por consola (simulado) - SIEMPRE se ejecuta\r\n\t\tsendConsoleAlert(project)\r\n\r\n\t\t// Enviar alerta por email (real) - SIEMPRE se ejecuta si est√° configurado\r\n\t\tconst emailResult = await sendEmailAlert(project)\r\n\t\talerts.push({\r\n\t\t\tproject: project.name,\r\n\t\t\tconsole: true,\r\n\t\t\temail: emailResult.success,\r\n\t\t\temailError: emailResult.error,\r\n\t\t})\r\n\t}\r\n\r\n\treturn { count: urgentProjects.length, alerts }\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 284, "column": 0}, "map": {"version":3,"sources":["file:///D:/freelance-project-manager/lib/cron/deadline-checker.ts"],"sourcesContent":["import { processAlerts } from \"@/lib/services/alert-service\"\r\n\r\n/**\r\n * Funci√≥n que se ejecuta peri√≥dicamente para verificar proyectos pr√≥ximos a vencer\r\n * Esta funci√≥n puede ser llamada desde un cron job o al iniciar el servidor\r\n */\r\nexport async function runDeadlineChecker() {\r\n\ttry {\r\n\t\tconst result = await processAlerts()\r\n\t\treturn result\r\n\t} catch (error) {\r\n\t\tconsole.error(\"‚ùå Error en deadline checker:\", error)\r\n\t\treturn { count: 0, alerts: [], error }\r\n\t}\r\n}\r\n\r\n/**\r\n * Ejecuta la verificaci√≥n cada X minutos\r\n * En producci√≥n, esto deber√≠a ejecutarse mediante un cron job externo o Vercel Cron\r\n */\r\nexport function startDeadlineChecker(intervalMinutes: number = 60) {\r\n\tconsole.log(`‚è∞ Iniciando verificador de deadlines cada ${intervalMinutes} minutos`)\r\n\r\n\t// Ejecutar inmediatamente al iniciar\r\n\trunDeadlineChecker()\r\n\r\n\t// Ejecutar peri√≥dicamente\r\n\tconst intervalMs = intervalMinutes * 60 * 1000\r\n\tsetInterval(() => {\r\n\t\trunDeadlineChecker()\r\n\t}, intervalMs)\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAMO,eAAe;IACrB,IAAI;QACH,MAAM,SAAS,MAAM,IAAA,oJAAa;QAClC,OAAO;IACR,EAAE,OAAO,OAAO;QACf,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO;YAAE,OAAO;YAAG,QAAQ,EAAE;YAAE;QAAM;IACtC;AACD;AAMO,SAAS,qBAAqB,kBAA0B,EAAE;IAChE,QAAQ,GAAG,CAAC,CAAC,0CAA0C,EAAE,gBAAgB,QAAQ,CAAC;IAElF,qCAAqC;IACrC;IAEA,0BAA0B;IAC1B,MAAM,aAAa,kBAAkB,KAAK;IAC1C,YAAY;QACX;IACD,GAAG;AACJ"}}]
}