module.exports=[87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},30553,a=>{"use strict";var b=a.i(72131),c=a.i(35112),d=a.i(11011),e=a.i(87924),f=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((a,c)=>{let f=b.forwardRef((a,b)=>{let{asChild:f,...g}=a,h=f?d.Slot:c;return(0,e.jsx)(h,{...g,ref:b})});return f.displayName=`Primitive.${c}`,{...a,[c]:f}},{});function g(a,b){a&&c.flushSync(()=>a.dispatchEvent(b))}a.s(["Primitive",()=>f,"dispatchDiscreteCustomEvent",()=>g])},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},34157,a=>{"use strict";let b=(0,a.i(70106).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["default",()=>b])},23312,a=>{"use strict";let b=(0,a.i(70106).default)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);a.s(["Bell",()=>b],23312)},88237,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},54161,29064,a=>{"use strict";var b=a.i(87924),c=a.i(11011),d=a.i(187),e=a.i(97895);let f=(0,d.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}function h(a){return new Date(a).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})}function i(a){let b=new Date;return Math.ceil((new Date(a).getTime()-b.getTime())/36e5)}function j(a){let b,c,d=i(a);if((b=new Date).setHours(0,0,0,0),(c=new Date(a)).setHours(0,0,0,0),(c.getTime()-b.getTime())/864e5,d<0){let a=Math.abs(d),b=Math.floor(a/24);return`${b} d\xeda${1!==b?"s":""} y ${a%24} hora${a%24!=1?"s":""} atrasado`}if(d<24)return`${d} hora${1!==d?"s":""}`;let e=Math.floor(d/24),f=d%24;return 0===f?`${e} d\xeda${1!==e?"s":""}`:`${e} d\xeda${1!==e?"s":""} y ${f} hora${1!==f?"s":""}`}function k(a){let b=i(a);return b>=0&&b<=168}a.s(["Badge",()=>g],54161),a.s(["formatDate",()=>h,"getHoursUntil",()=>i,"getTimeUntilFormatted",()=>j,"isWithin7Days",()=>k],29064)},7264,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(69240),f=a.i(88237),g=a.i(54161),h=a.i(40695),i=a.i(87682),j=a.i(3130);let k=(0,a.i(70106).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var l=a.i(96221),m=a.i(29064),n=a.i(23292);let o={pending:"bg-slate-500 text-white",in_progress:"bg-blue-500 text-white",completed:"bg-green-500 text-white",delayed:"bg-red-500 text-white"},p={pending:"Pendiente",in_progress:"En Progreso",completed:"Completado",delayed:"Retrasado"};function q({initialProjects:a,initialClients:q}){let[r,s]=(0,c.useState)(a),[t]=(0,c.useState)(q),[u,v]=(0,c.useState)("all"),[w,x]=(0,c.useState)("all"),[y,z]=(0,c.useState)(null),A=(0,d.useRouter)(),B=r.filter(a=>("all"===u||a.status===u)&&("all"===w||a.client_id===w));async function C(a){z(a);let b=(0,e.createClient)(),{error:c}=await b.from("projects").update({status:"completed",completion_percentage:100}).eq("id",a);z(null),c?n.toast.error("Error al actualizar el proyecto"):(n.toast.success("Proyecto marcado como completado"),s(b=>b.map(b=>b.id===a?{...b,status:"completed",completion_percentage:100}:b)),A.refresh())}return(0,b.jsxs)(j.Card,{children:[(0,b.jsxs)(j.CardHeader,{children:[(0,b.jsx)(j.CardTitle,{children:"Lista de Proyectos"}),(0,b.jsx)(j.CardDescription,{children:"Todos tus proyectos con información detallada"})]}),(0,b.jsxs)(j.CardContent,{children:[(0,b.jsxs)("div",{className:"mb-6 flex flex-wrap gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Filtrar por Estado"}),(0,b.jsxs)(i.Select,{value:u,onValueChange:v,children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{placeholder:"Todos los estados"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"all",children:"Todos los estados"}),(0,b.jsx)(i.SelectItem,{value:"pending",children:"Pendiente"}),(0,b.jsx)(i.SelectItem,{value:"in_progress",children:"En Progreso"}),(0,b.jsx)(i.SelectItem,{value:"completed",children:"Completado"}),(0,b.jsx)(i.SelectItem,{value:"delayed",children:"Retrasado"})]})]})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Filtrar por Cliente"}),(0,b.jsxs)(i.Select,{value:w,onValueChange:x,children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{placeholder:"Todos los clientes"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"all",children:"Todos los clientes"}),t.map(a=>(0,b.jsx)(i.SelectItem,{value:a.id,children:a.name},a.id))]})]})]})]}),(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(f.Table,{children:[(0,b.jsx)(f.TableHeader,{children:(0,b.jsxs)(f.TableRow,{children:[(0,b.jsx)(f.TableHead,{children:"Nombre del Proyecto"}),(0,b.jsx)(f.TableHead,{children:"Cliente"}),(0,b.jsx)(f.TableHead,{children:"Fecha de Inicio"}),(0,b.jsx)(f.TableHead,{children:"Fecha de Vencimiento"}),(0,b.jsx)(f.TableHead,{children:"Estado"}),(0,b.jsx)(f.TableHead,{children:"Presupuesto Estimado"}),(0,b.jsx)(f.TableHead,{className:"text-right",children:"Acción"})]})}),(0,b.jsx)(f.TableBody,{children:0===B.length?(0,b.jsx)(f.TableRow,{children:(0,b.jsx)(f.TableCell,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No hay proyectos que coincidan con los filtros seleccionados"})}):B.map(a=>(0,b.jsxs)(f.TableRow,{children:[(0,b.jsx)(f.TableCell,{className:"font-medium",children:a.name}),(0,b.jsxs)(f.TableCell,{children:[a.clients.name,a.clients.company&&(0,b.jsxs)("span",{className:"text-muted-foreground",children:[" - ",a.clients.company]})]}),(0,b.jsx)(f.TableCell,{children:(0,m.formatDate)(a.start_date)}),(0,b.jsx)(f.TableCell,{children:(0,m.formatDate)(a.due_date)}),(0,b.jsx)(f.TableCell,{children:(0,b.jsx)(g.Badge,{className:o[a.status],children:p[a.status]})}),(0,b.jsx)(f.TableCell,{children:a.budget?`$${a.budget.toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2})}`:"-"}),(0,b.jsx)(f.TableCell,{className:"text-right",children:"completed"!==a.status&&(0,b.jsx)(h.Button,{variant:"outline",size:"sm",onClick:()=>C(a.id),disabled:y===a.id,className:"gap-2",children:y===a.id?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Loader2,{className:"h-4 w-4 animate-spin"}),"Actualizando..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k,{className:"h-4 w-4"}),"Marcar como Completado"]})})})]},a.id))})]})})]})]})}a.s(["ProjectsTable",()=>q],7264)},8164,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(69240),e=a.i(23312),f=a.i(40695),g=a.i(38246);function h(){let[a,h]=(0,c.useState)(0);return(0,c.useEffect)(()=>{let a=(0,d.createClient)();async function b(){let{count:b}=await a.from("alerts").select("*",{count:"exact",head:!0}).eq("is_read",!1);h(b||0)}b();let c=setInterval(b,3e4);return()=>clearInterval(c)},[]),(0,b.jsx)(g.default,{href:"/alerts",children:(0,b.jsxs)(f.Button,{variant:"ghost",size:"icon",className:"relative",children:[(0,b.jsx)(e.Bell,{className:"h-5 w-5"}),a>0&&(0,b.jsx)("span",{className:"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-[10px] font-bold text-white",children:a>9?"9+":a})]})})}a.s(["AlertNotification",()=>h])}];

//# sourceMappingURL=_d5679954._.js.map