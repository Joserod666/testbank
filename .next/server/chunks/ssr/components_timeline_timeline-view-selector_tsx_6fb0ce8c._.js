module.exports=[16873,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(40695),e=a.i(70106);let f=(0,e.default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),g=(0,e.default)("ChartNoAxesGantt",[["path",{d:"M8 6h10",key:"9lnwnk"}],["path",{d:"M6 12h9",key:"1g9pqf"}],["path",{d:"M11 18h7",key:"c8dzvl"}]]),h=(0,e.default)("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);var i=a.i(3130),j=a.i(54161);let k=(0,e.default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),l=(0,e.default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var m=a.i(29064);let n={pending:"bg-slate-500",in_progress:"bg-blue-500",completed:"bg-green-500",delayed:"bg-red-500"},o={pending:"Pendiente",in_progress:"En Progreso",completed:"Completado",delayed:"Retrasado"};function p({projects:a}){let d=(0,c.useMemo)(()=>[...a].sort((a,b)=>new Date(a.due_date).getTime()-new Date(b.due_date).getTime()),[a]),e=new Date,f=(0,c.useMemo)(()=>0===d.length?e:new Date(Math.min(...d.map(a=>new Date(a.start_date).getTime()))),[d]),g=(0,c.useMemo)(()=>0===d.length?e:new Date(Math.max(...d.map(a=>new Date(a.due_date).getTime()))),[d]),h=(0,c.useMemo)(()=>Math.ceil((g.getTime()-f.getTime())/864e5)+1,[f,g]);return(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Vista de Línea de Tiempo (Gantt)"})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)("div",{className:"space-y-6",children:d.map(a=>{let c,d,g,i,p,q=new Date(a.start_date),r=new Date(a.due_date),s=(c=q.getTime()-f.getTime(),d=r.getTime()-f.getTime(),g=Math.floor(c/864e5),i=Math.floor(d/864e5),{left:`${g/h*100}%`,width:`${(i-g+1)/h*100}%`}),t=(0,m.getHoursUntil)(r),u=(0,m.isWithin7Days)(r),v=t<0;return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("h4",{className:"font-semibold",children:a.name}),(0,b.jsx)(j.Badge,{variant:"outline",className:"text-xs",children:a.clients.name}),u&&(0,b.jsxs)(j.Badge,{variant:"destructive",className:"gap-1 text-xs",children:[(0,b.jsx)(k,{className:"h-3 w-3"}),"Urgente"]}),v&&(0,b.jsxs)(j.Badge,{variant:"destructive",className:"gap-1 text-xs",children:[(0,b.jsx)(l,{className:"h-3 w-3"}),"Vencido"]})]}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:(0,m.getTimeUntilFormatted)(r)})]}),(0,b.jsxs)("div",{className:"relative h-12 rounded-md border bg-muted/30 overflow-hidden",children:[(0,b.jsx)("div",{className:`absolute top-0 h-full rounded-md ${v?"bg-red-500":u?"bg-amber-500 animate-pulse":n[a.status]} transition-all`,style:{left:s.left,width:s.width},children:(0,b.jsx)("div",{className:"flex h-full items-center justify-center px-2",children:(0,b.jsx)("span",{className:"text-xs font-medium text-white truncate",children:o[a.status]})})}),(0,b.jsx)("div",{className:"absolute top-0 h-full w-0.5 bg-primary",style:{left:(p=Math.floor((e.getTime()-f.getTime())/864e5),`${p/h*100}%`)},children:(0,b.jsx)("div",{className:"absolute -top-1 left-1/2 h-3 w-3 -translate-x-1/2 rounded-full bg-primary"})})]}),(0,b.jsxs)("div",{className:"mt-1 flex justify-between text-xs text-muted-foreground",children:[(0,b.jsx)("span",{children:(0,m.formatDate)(q)}),(0,b.jsx)("span",{className:u||v?"font-semibold text-destructive":"",children:(0,m.formatDate)(r)})]})]},a.id)})})})]})}let q={pending:"bg-slate-500 text-white",in_progress:"bg-blue-500 text-white",completed:"bg-green-500 text-white",delayed:"bg-red-500 text-white"},r={pending:"Pendiente",in_progress:"En Progreso",completed:"Completado",delayed:"Retrasado"};function s({projects:a}){let d=(0,c.useMemo)(()=>{let b={};return a.forEach(a=>{let c=new Date(a.due_date).toISOString().split("T")[0];b[c]||(b[c]=[]),b[c].push(a)}),b},[a]),e=(0,c.useMemo)(()=>Object.keys(d).sort(),[d]),f=new Date().toISOString().split("T")[0];return(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Vista de Calendario"})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)("div",{className:"space-y-6",children:e.map(a=>{let c=d[a],e=new Date(a),g=a===f;return c.some(a=>(0,m.isWithin7Days)(a.due_date)),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:`flex items-center gap-3 ${g?"font-bold":""}`,children:[(0,b.jsx)("div",{className:`flex h-10 w-10 items-center justify-center rounded-lg ${g?"bg-primary text-primary-foreground":"bg-muted"}`,children:e.getDate()}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:e.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),g&&(0,b.jsx)("p",{className:"text-sm text-primary",children:"Hoy"})]})]}),(0,b.jsx)("div",{className:"space-y-2 pl-[52px]",children:c.map(a=>{let c=(0,m.getHoursUntil)(a.due_date),d=(0,m.isWithin7Days)(a.due_date),e=c<0;return(0,b.jsx)("div",{className:`rounded-lg border p-4 transition-all ${d||e?"border-destructive bg-destructive/5 shadow-lg ring-2 ring-destructive/20":"bg-card"}`,children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,b.jsx)("h4",{className:"font-semibold",children:a.name}),(0,b.jsx)(j.Badge,{className:q[a.status],children:r[a.status]}),d&&(0,b.jsxs)(j.Badge,{variant:"destructive",className:"gap-1",children:[(0,b.jsx)(k,{className:"h-3 w-3"}),"Menos de 7 días"]}),e&&(0,b.jsxs)(j.Badge,{variant:"destructive",className:"gap-1",children:[(0,b.jsx)(l,{className:"h-3 w-3"}),"Vencido"]})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.clients.name}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,b.jsxs)("span",{className:"text-muted-foreground",children:["Inicio: ",(0,b.jsx)("span",{className:"font-medium",children:(0,m.formatDate)(a.start_date)})]}),(0,b.jsxs)("span",{className:"text-muted-foreground",children:["Progreso: ",(0,b.jsxs)("span",{className:"font-medium",children:[a.completion_percentage,"%"]})]})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:`text-sm font-semibold ${e?"text-destructive":d?"text-amber-600":"text-muted-foreground"}`,children:(0,m.getTimeUntilFormatted)(a.due_date)}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,m.formatDate)(a.due_date)})]})]})},a.id)})})]},a)})})})]})}var t=a.i(88237);let u={pending:"bg-slate-500 text-white",in_progress:"bg-blue-500 text-white",completed:"bg-green-500 text-white",delayed:"bg-red-500 text-white"},v={pending:"Pendiente",in_progress:"En Progreso",completed:"Completado",delayed:"Retrasado"};function w({projects:a}){let d=(0,c.useMemo)(()=>[...a].sort((a,b)=>new Date(a.due_date).getTime()-new Date(b.due_date).getTime()),[a]);return(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Línea de Tiempo de Proyectos"})}),(0,b.jsxs)(i.CardContent,{children:[(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(t.Table,{children:[(0,b.jsx)(t.TableHeader,{children:(0,b.jsxs)(t.TableRow,{children:[(0,b.jsx)(t.TableHead,{children:"Proyecto"}),(0,b.jsx)(t.TableHead,{children:"Cliente"}),(0,b.jsx)(t.TableHead,{children:"Fecha de Inicio"}),(0,b.jsx)(t.TableHead,{children:"Fecha de Vencimiento"}),(0,b.jsx)(t.TableHead,{children:"Estado"}),(0,b.jsx)(t.TableHead,{children:"Progreso"}),(0,b.jsx)(t.TableHead,{children:"Tiempo Restante"})]})}),(0,b.jsx)(t.TableBody,{children:0===d.length?(0,b.jsx)(t.TableRow,{children:(0,b.jsx)(t.TableCell,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No hay proyectos activos"})}):d.map(a=>{let c=(0,m.getHoursUntil)(a.due_date),d=(0,m.isWithin7Days)(a.due_date),e=c<0,f=(0,m.getTimeUntilFormatted)(a.due_date);return(0,b.jsxs)(t.TableRow,{className:e?"bg-red-50 dark:bg-red-950/20 border-l-4 border-l-red-500":d?"bg-amber-50 dark:bg-amber-950/20 border-l-4 border-l-amber-500":"",children:[(0,b.jsx)(t.TableCell,{className:"font-medium",children:a.name}),(0,b.jsx)(t.TableCell,{children:a.clients.name}),(0,b.jsx)(t.TableCell,{children:(0,m.formatDate)(a.start_date)}),(0,b.jsx)(t.TableCell,{children:(0,b.jsx)("span",{className:e?"font-semibold text-red-600":d?"font-semibold text-amber-600":"",children:(0,m.formatDate)(a.due_date)})}),(0,b.jsx)(t.TableCell,{children:(0,b.jsx)(j.Badge,{className:u[a.status],children:v[a.status]})}),(0,b.jsxs)(t.TableCell,{children:[a.completion_percentage,"%"]}),(0,b.jsx)(t.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[d&&(0,b.jsx)(k,{className:"h-4 w-4 text-amber-600"}),e&&(0,b.jsx)(l,{className:"h-4 w-4 text-red-600"}),(0,b.jsx)("span",{className:e?"font-semibold text-red-600":d?"font-semibold text-amber-600":"",children:f})]})})]},a.id)})})]})}),(0,b.jsxs)("div",{className:"mt-4 flex flex-wrap gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-4 w-4 rounded border-l-4 border-l-red-500 bg-red-50"}),(0,b.jsx)("span",{children:"Proyecto vencido"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-4 w-4 rounded border-l-4 border-l-amber-500 bg-amber-50"}),(0,b.jsx)("span",{children:"Vence en menos de 7 días"})]})]})]})]})}function x({projects:a,listView:e}){let[i,j]=(0,c.useState)("table");return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Vista de Línea de Tiempo"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(d.Button,{variant:"table"===i?"default":"outline",size:"sm",onClick:()=>j("table"),className:"gap-2",children:[(0,b.jsx)(h,{className:"h-4 w-4"}),"Tabla"]}),(0,b.jsxs)(d.Button,{variant:"list"===i?"default":"outline",size:"sm",onClick:()=>j("list"),className:"gap-2",children:[(0,b.jsx)(h,{className:"h-4 w-4"}),"Lista"]}),(0,b.jsxs)(d.Button,{variant:"calendar"===i?"default":"outline",size:"sm",onClick:()=>j("calendar"),className:"gap-2",children:[(0,b.jsx)(f,{className:"h-4 w-4"}),"Calendario"]}),(0,b.jsxs)(d.Button,{variant:"gantt"===i?"default":"outline",size:"sm",onClick:()=>j("gantt"),className:"gap-2",children:[(0,b.jsx)(g,{className:"h-4 w-4"}),"Gantt"]})]})]}),"table"===i&&(0,b.jsx)(w,{projects:a}),"list"===i&&e,"calendar"===i&&(0,b.jsx)(s,{projects:a}),"gantt"===i&&(0,b.jsx)(p,{projects:a})]})}a.s(["TimelineViewSelector",()=>x],16873)}];

//# sourceMappingURL=components_timeline_timeline-view-selector_tsx_6fb0ce8c._.js.map